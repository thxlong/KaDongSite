/*PROMPT
TASK: <Mô tả ngắn gọn task>
DETAIL: <Chi tiết yêu cầu, acceptance criteria>
LANG: VN
*/

{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "projectName": "kadong-tools",
  "displayName": "KaDong Personal Utilities",
  "version": "1.4.0",
  "description": "Personal utilities website for couple - Notes, Countdown, Calendar, Currency, Fashion tools with PostgreSQL database and real-time gold prices",
  "author": "KaDong Team",
  "language": "nodejs",
  "nodeVersion": ">=18.0.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/username/KaDongSite.git"
  },
  
  "backend": {
    "framework": "express",
    "version": "4.18.2",
    "entryPoint": "backend/app.js",
    "port": 5000,
    "db": "postgresql",
    "dbVersion": ">=13.0",
    "dbDriver": "pg",
    "orm": "none",
    "queryStyle": "raw-sql-parameterized"
  },
  
  "frontend": {
    "framework": "react",
    "version": "18.2.0",
    "buildTool": "vite",
    "viteVersion": "5.0.8",
    "entryPoint": "frontend/src/main.jsx",
    "port": 5173,
    "styling": "tailwind",
    "tailwindVersion": "3.3.6",
    "animation": "framer-motion",
    "animationVersion": "10.16.16",
    "router": "react-router-dom",
    "routerVersion": "6.20.0",
    "icons": "lucide-react",
    "dateUtils": "date-fns",
    "propTypes": "prop-types",
    "propTypesVersion": "^15.8.1"
  },
  
  "codeStyle": {
    "lint": "eslint",
    "lintConfig": ".eslintrc.json",
    "prettier": true,
    "prettierConfig": ".prettierrc",
    "editorConfig": true,
    "rules": {
      "semi": false,
      "singleQuote": true,
      "tabWidth": 2,
      "trailingComma": "es5",
      "printWidth": 100
    }
  },

  "shellCommands": {
    "environment": "cross-platform",
    "defaultShell": "PowerShell",
    "compatibility": {
      "windows": {
        "shell": "PowerShell 5.1+",
        "pathSeparator": "\\",
        "cdCommand": "cd",
        "chainOperator": ";",
        "backgroundOperator": "Start-Job",
        "notes": [
          "PowerShell không cho phép & như cmd.exe",
          "Dùng ; để chain commands",
          "Dùng && trong npm scripts (npm tự xử lý cross-platform)"
        ]
      },
      "linux": {
        "shell": "bash",
        "pathSeparator": "/",
        "cdCommand": "cd",
        "chainOperator": "&&",
        "backgroundOperator": "&"
      }
    },
    "runCommands": {
      "frontend": {
        "dev": "npm run dev",
        "build": "npm run build",
        "preview": "npm run preview"
      },
      "backend": {
        "dev": "npm run dev:backend",
        "start": "npm run start:backend",
        "migrate": "npm run db:migrate",
        "seed": "npm run db:seed",
        "setup": "npm run db:setup"
      },
      "both": {
        "dev": "Run in 2 terminals: Terminal 1: npm run dev:backend, Terminal 2: npm run dev",
        "alternative": "Use VS Code tasks or concurrently package"
      }
    },
    "correctExamples": [
      "✓ cd backend; npm run dev (PowerShell)",
      "✓ cd backend && npm run dev (npm scripts)",
      "✓ npm run dev:backend (from root, uses package.json)",
      "✗ cd /d backend & npm run dev (cmd.exe only)",
      "✗ cd backend & npm run dev (fails in PowerShell)"
    ]
  },
  
  "conventions": {
    "idType": "uuid",
    "idGeneration": "uuid_generate_v4()",
    "dateFormat": "ISO 8601",
    "timestampFormat": "TIMESTAMP",
    "apiPrefix": "/api",
    "apiVersion": "v1",
    "softDelete": true,
    "softDeleteField": "deleted_at",
    "auditFields": {
      "createdAt": "created_at",
      "updatedAt": "updated_at",
      "deletedAt": "deleted_at"
    },
    "naming": {
      "routes": "kebab-case",
      "files": "kebab-case",
      "reactComponents": "PascalCase",
      "reactPages": "PascalCase",
      "variables": "camelCase",
      "constants": "UPPER_SNAKE_CASE",
      "functions": "camelCase",
      "dbTables": "snake_case",
      "dbColumns": "snake_case",
      "dbIndexes": "idx_tablename_columnname",
      "apiEndpoints": "kebab-case"
    },
    "fileStructure": {
      "components": "frontend/src/components/",
      "pages": "frontend/src/pages/",
      "hooks": "frontend/src/hooks/",
      "utils": "frontend/src/utils/",
      "controllers": "backend/controllers/",
      "routes": "backend/routes/",
      "models": "backend/models/",
      "middleware": "backend/middleware/",
      "config": "backend/config/",
      "migrations": "backend/database/migrations/",
      "seeds": "backend/database/seeds/",
      "tests": "backend/tests/",
      "docs": "docs/"
    },
    "documentation": {
      "location": "docs/",
      "structure": {
        "README.md": "Main documentation index and navigation",
        "SETUP_INSTALLATION.md": "Installation and setup guide",
        "SHELL_COMMANDS_GUIDE.md": "PowerShell vs CMD commands reference",
        "API_DOCUMENTATION.md": "Complete REST API reference",
        "DATABASE_SCHEMA.md": "Database tables and relationships",
        "PROJECT_STRUCTURE.md": "Project architecture and folders",
        "FRONTEND_GUIDE.md": "React components and state management",
        "MIGRATION_SUMMARY.md": "localStorage to PostgreSQL migration details",
        "DEPLOYMENT_GUIDE.md": "Deployment instructions",
        "MAINTENANCE.md": "Maintenance and monitoring tasks",
        "CONTRIBUTING.md": "Contribution guidelines",
        "TROUBLESHOOTING.md": "Common issues and solutions",
        "CHANGELOG.md": "Version history and release notes",
        "dev-notes/": "Development notes folder (features, bugfixes, commits)"
      },
      "devNotes": {
        "location": "docs/dev-notes/",
        "purpose": "Track implementation progress, bug fixes, and commit summaries during development",
        "structure": {
          "features/": "Feature implementation status and progress tracking",
          "bugfixes/": "Bug fix documentation and root cause analysis",
          "commits/": "Commit summaries and detailed change logs before committing",
          "README.md": "Dev-notes folder guide and best practices"
        },
        "namingConventions": {
          "features": "{feature-name}-implementation-status.md",
          "bugfixes": "fix-{bug-description}.md",
          "commits": "{feature-or-component}-commit.md"
        },
        "archivePolicy": {
          "keepForever": ["features/*", "bugfixes/*"],
          "canDelete": ["commits/* (after git commit)"],
          "reasoning": "Features and bugfixes are knowledge base, commits are duplicated in git history"
        },
        "aiInstructions": [
          "When implementing new feature: Create features/{feature-name}-implementation-status.md to track progress",
          "When fixing bug: Create bugfixes/fix-{bug-description}.md with root cause analysis",
          "Before committing: Create commits/{feature-name}-commit.md with changes summary",
          "Never create status/summary files in project root - always use docs/dev-notes/",
          "Update existing status files instead of creating duplicates",
          "Follow naming conventions strictly for consistency"
        ]
      },
      "specKit": {
        "location": "specs/",
        "purpose": "Manage feature specifications, implementation plans, and task breakdowns using structured workflow",
        "structure": {
          "README.md": "Spec Kit user guide and workflow documentation",
          "COMMANDS.md": "Command reference and usage examples",
          "config.json": "Configuration and validation rules",
          "specs/": "Feature specifications (.spec files)",
          "plans/": "Implementation plans (.plan files)",
          "plans/tasks/": "Task breakdown files (.task files)",
          "templates/": "Reusable templates for specs, plans, and tasks"
        },
        "namingConventions": {
          "specs": "specs/specs/{id}_{name}.spec",
          "plans": "specs/plans/{spec_id}.plan",
          "tasks": "specs/plans/tasks/{plan_id}_phase{X}_task{Y}.task"
        },
        "workflow": {
          "step1": "Create specification with /specify command",
          "step2": "Create implementation plan with /plan command",
          "step3": "Break down into tasks with /tasks command",
          "step4": "Execute and track with /implement command"
        },
        "commands": {
          "/specify": "Create new specification document",
          "/plan": "Create implementation plan for a spec",
          "/tasks": "Break down plan phase into actionable tasks",
          "/implement": "Start implementation and track progress"
        },
        "integration": {
          "devNotes": "Links to docs/dev-notes/features/ for tracking",
          "documentation": "Links to API docs, database schema, user guides",
          "manifest": "Updates project_manifest.json with new features"
        },
        "aiInstructions": [
          "When user requests new feature: Use /specify to create spec",
          "After spec approved: Use /plan to create implementation plan",
          "For complex phases: Use /tasks to break down work",
          "When starting implementation: Use /implement to track progress",
          "Always link specs → plans → tasks → implementation status",
          "Update progress percentages in plans as tasks complete",
          "Document technical decisions in plans with reasoning",
          "Keep specs focused on WHAT, plans on HOW, tasks on execution"
        ]
      },
      "notes": [
        "All docs use .md extension for GitHub compatibility",
        "README.md serves as index/navigation hub",
        "File names use kebab-case in dev-notes, UPPER_SNAKE_CASE elsewhere",
        "No numbered prefixes (removed wiki structure)",
        "Each doc is self-contained with internal links",
        "Dev-notes are temporary/working documents, main docs are permanent",
        "Spec Kit provides structured workflow for planning and tracking"
      ]
    }
  },
  
  "database": {
    "name": "kadong_tools",
    "host": "localhost",
    "port": 5432,
    "poolSize": 20,
    "idleTimeout": 30000,
    "connectionTimeout": 2000,
    "ssl": false,
    "sslProduction": true,
    "tables": [
      "users",
      "notes",
      "countdown_events",
      "tools",
      "feedback",
      "currency_rates",
      "sessions",
      "fashion_outfits"
    ],
    "primaryKey": "uuid",
    "foreignKeyConstraints": true,
    "cascadeRules": {
      "users->notes": "CASCADE",
      "users->countdown_events": "CASCADE",
      "users->sessions": "CASCADE",
      "users->feedback": "SET NULL",
      "tools->notes": "SET NULL"
    },
    "indexes": {
      "required": [
        "users(email)",
        "notes(user_id)",
        "notes(created_at DESC)",
        "countdown_events(user_id)",
        "countdown_events(target_date)",
        "sessions(token)",
        "sessions(expires_at)"
      ],
      "gin": [
        "users(preferences)",
        "tools(config)",
        "currency_rates(rates)"
      ]
    },
    "triggers": [
      "update_updated_at_column"
    ]
  },
  
  "api": {
    "baseUrl": "http://localhost:5000",
    "prefix": "/api",
    "version": "v1",
    "contentType": "application/json",
    "cors": {
      "enabled": true,
      "origin": "http://localhost:5173",
      "credentials": true
    },
    "rateLimit": {
      "general": {
        "windowMs": 900000,
        "max": 100
      },
      "auth": {
        "windowMs": 900000,
        "max": 5
      },
      "writes": {
        "windowMs": 3600000,
        "max": 50
      }
    },
    "endpoints": {
      "auth": "/api/auth",
      "notes": "/api/notes",
      "events": "/api/events",
      "tools": "/api/tools",
      "feedback": "/api/feedback",
      "currency": "/api/currency",
      "users": "/api/users",
      "fashion": "/api/fashion"
    },
    "responseFormat": {
      "success": {
        "success": true,
        "data": "{}",
        "message": "optional"
      },
      "error": {
        "success": false,
        "error": {
          "code": "ERROR_CODE",
          "message": "string",
          "details": "optional"
        }
      }
    },
    "statusCodes": {
      "200": "OK - Successful GET/PUT/DELETE",
      "201": "Created - Successful POST",
      "204": "No Content - Successful DELETE no body",
      "400": "Bad Request - Invalid data",
      "401": "Unauthorized - Auth required",
      "403": "Forbidden - Not authorized",
      "404": "Not Found - Resource missing",
      "409": "Conflict - Duplicate resource",
      "422": "Unprocessable Entity - Validation failed",
      "500": "Internal Server Error"
    }
  },
  
  "tests": {
    "unit": "jest",
    "integration": "supertest",
    "e2e": "cypress",
    "coverageThreshold": 80,
    "coverageReports": ["text", "html", "lcov"],
    "testMatch": [
      "**/__tests__/**/*.js",
      "**/*.test.js",
      "**/*.spec.js"
    ],
    "commands": {
      "test": "npm test",
      "testWatch": "npm run test:watch",
      "testCoverage": "npm run test:coverage",
      "testE2E": "npm run test:e2e"
    },
    "mockData": {
      "users": 3,
      "notes": 5,
      "events": 4,
      "tools": 5,
      "feedback": 2,
      "fashion_outfits": 3
    }
  },
  
  "security": {
    "noHardcodedSecrets": true,
    "useEnvVariables": true,
    "envFile": ".env",
    "envExample": ".env.example",
    "auth": {
      "strategy": "jwt",
      "tokenType": "Bearer",
      "tokenExpiry": "7d",
      "refreshToken": false,
      "passwordHash": "bcrypt",
      "saltRounds": 10
    },
    "sqlInjectionPrevention": {
      "method": "parameterized-queries",
      "placeholder": "$1, $2, $3...",
      "neverConcatenate": true
    },
    "xss": {
      "sanitizeInput": true,
      "escapeOutput": true
    },
    "csrf": {
      "enabled": false,
      "note": "Not needed for stateless JWT API"
    },
    "headers": {
      "helmet": true,
      "cors": true
    },
    "secrets": [
      "SESSION_SECRET",
      "JWT_SECRET",
      "DB_PASSWORD",
      "CURRENCY_API_KEY"
    ],
    "avoidInCode": [
      "hardcoded passwords",
      "console.log with sensitive data",
      "unencrypted tokens",
      "SQL string concatenation"
    ]
  },
  
  "deploy": {
    "environments": {
      "development": {
        "frontendUrl": "http://localhost:5173",
        "backendUrl": "http://localhost:5000",
        "databaseUrl": "postgresql://localhost:5432/kadong_tools"
      },
      "production": {
        "frontend": "vercel",
        "backend": "railway",
        "database": "supabase",
        "frontendUrl": "https://kadong-tools.vercel.app",
        "backendUrl": "https://api.kadong-tools.com",
        "ssl": true,
        "cdn": true
      }
    },
    "ci": "github-actions",
    "ciFile": ".github/workflows/deploy.yml",
    "buildCommands": {
      "frontend": [
        "cd frontend",
        "npm ci",
        "npm run build"
      ],
      "backend": [
        "cd backend",
        "npm ci",
        "npm run migrate:up"
      ]
    },
    "migrations": {
      "runBefore": "deployment",
      "backupBefore": true,
      "rollbackStrategy": "migrate:down"
    },
    "healthCheck": {
      "endpoint": "/health",
      "interval": "5m",
      "timeout": "10s"
    }
  },
  
  "design": {
    "theme": "pastel",
    "colorPalette": {
      "pink": "#FFD6E8",
      "purple": "#E6D5F7",
      "mint": "#C8F4E3",
      "yellow": "#FFF4C9",
      "blue": "#D4E9FF",
      "peach": "#FFE5CC",
      "cream": "#FFF8E7"
    },
    "typography": {
      "heading": "Poppins",
      "body": "Nunito",
      "code": "Fira Code"
    },
    "spacing": {
      "xs": "4px",
      "sm": "8px",
      "md": "16px",
      "lg": "24px",
      "xl": "32px",
      "2xl": "48px"
    },
    "borderRadius": {
      "sm": "6px",
      "md": "8px",
      "lg": "12px",
      "xl": "16px",
      "2xl": "24px",
      "3xl": "32px",
      "full": "9999px"
    },
    "designPrinciples": [
      "Accessible (WCAG AA)",
      "Scalable (Modular)",
      "Modern (Latest tech)",
      "Cute (Pastel & friendly)"
    ]
  },
  
  "documentation": {
    "location": "docs/wiki/",
    "format": "markdown",
    "sections": [
      "01_Introduction.md",
      "02_ProjectStructure.md",
      "03_SetupAndInstallation.md",
      "04_DatabaseSchema.md",
      "05_API_Documentation.md",
      "06_FrontendOverview.md",
      "07_DeploymentGuide.md",
      "08_ContributionGuide.md",
      "09_Troubleshooting.md",
      "10_Changelog.md",
      "11_Maintenance_Guide.md"
    ],
    "readme": "README.md",
    "quickstart": "QUICKSTART.md",
    "changelog": "docs/wiki/10_Changelog.md",
    "apiDocs": "docs/wiki/05_API_Documentation.md",
    "updateOn": [
      "feature addition",
      "breaking change",
      "bug fix",
      "API change"
    ]
  },
  
  "tools": {
    "available": [
      {
        "name": "notes",
        "displayName": "Notes Tool",
        "icon": "StickyNote",
        "route": "/notes",
        "apiEndpoint": "/api/notes",
        "dbTable": "notes",
        "features": ["CRUD", "search", "color-coding", "pin", "soft-delete"]
      },
      {
        "name": "countdown",
        "displayName": "Countdown Tool",
        "icon": "Clock",
        "route": "/countdown",
        "apiEndpoint": "/api/events",
        "dbTable": "countdown_events",
        "features": ["CRUD", "real-time-countdown", "past-events", "color-themes"]
      },
      {
        "name": "calendar",
        "displayName": "Calendar Tool",
        "icon": "Calendar",
        "route": "/calendar",
        "apiEndpoint": "/api/events",
        "dbTable": "countdown_events",
        "features": ["month-view", "date-events", "navigation"]
      },
      {
        "name": "currency",
        "displayName": "Currency Tool",
        "icon": "DollarSign",
        "route": "/currency",
        "apiEndpoint": "/api/currency",
        "dbTable": "currency_rates",
        "features": ["conversion", "multiple-currencies", "rate-display", "history"]
      },
      {
        "name": "fashion",
        "displayName": "Fashion Color Matcher Tool",
        "icon": "Shirt",
        "route": "/fashion",
        "apiEndpoint": "/api/fashion",
        "dbTable": "fashion_outfits",
        "features": ["CRUD", "color-picker", "realtime-preview", "svg-rendering", "outfit-management"]
      }
    ],
    "planned": [
      "weather",
      "todo-list",
      "timer-pomodoro",
      "voice-notes",
      "file-attachments"
    ]
  },
  
  "scripts": {
    "frontend": {
      "dev": "vite",
      "build": "vite build",
      "preview": "vite preview",
      "lint": "eslint src --ext .js,.jsx",
      "format": "prettier --write \"src/**/*.{js,jsx,json,css,md}\""
    },
    "backend": {
      "start": "node app.js",
      "dev": "nodemon app.js",
      "test": "jest",
      "test:watch": "jest --watch",
      "test:coverage": "jest --coverage",
      "db:migrate:up": "node scripts/migrate.js up",
      "db:migrate:down": "node scripts/migrate.js down",
      "db:migrate:status": "node scripts/migrate.js status",
      "db:seed": "node scripts/seed.js",
      "db:test": "node scripts/test-db.js",
      "db:setup": "npm run db:migrate:up && npm run db:seed",
      "lint": "eslint . --ext .js",
      "format": "prettier --write \"**/*.{js,json,md}\""
    }
  },
  
  "gitWorkflow": {
    "branches": {
      "main": "production",
      "develop": "development",
      "feature": "feature/*",
      "fix": "fix/*",
      "docs": "docs/*",
      "refactor": "refactor/*",
      "test": "test/*",
      "chore": "chore/*"
    },
    "commitConvention": "conventional-commits",
    "commitTypes": [
      "feat: New feature",
      "fix: Bug fix",
      "docs: Documentation",
      "style: Code formatting",
      "refactor: Code refactoring",
      "test: Tests",
      "chore: Maintenance"
    ],
    "commitFormat": "type(scope): subject",
    "prTemplate": ".github/pull_request_template.md",
    "codeReview": {
      "required": true,
      "minApprovals": 1,
      "checks": ["lint", "tests", "build"]
    }
  },
  
  "monitoring": {
    "uptime": "uptimerobot",
    "errors": "sentry",
    "analytics": "none",
    "logging": {
      "backend": "winston",
      "level": "info",
      "levels": ["error", "warn", "info", "debug"],
      "files": {
        "error": "error.log",
        "combined": "combined.log"
      }
    },
    "metrics": {
      "responseTime": true,
      "databaseQueries": true,
      "activeConnections": true
    }
  },
  
  "maintenance": {
    "schedule": {
      "daily": ["health-check", "log-review"],
      "weekly": ["database-backup", "disk-space-check", "error-log-review"],
      "monthly": ["vacuum-analyze", "update-dependencies", "security-audit", "performance-review"],
      "quarterly": ["ssl-check", "backup-restoration-test", "archive-old-data", "docs-review"]
    },
    "backups": {
      "frequency": "daily",
      "retention": {
        "daily": "7 days",
        "weekly": "4 weeks",
        "monthly": "12 months"
      },
      "location": "backups/",
      "cloudBackup": "s3",
      "automated": true
    }
  },
  
  "boundaries": {
    "maxFileSizeKB": 500,
    "maxFunctionLines": 50,
    "maxComponentLines": 300,
    "maxApiResponseSizeKB": 1000,
    "maxDatabaseConnections": 20,
    "maxConcurrentRequests": 100,
    "requestTimeout": 30000,
    "databaseQueryTimeout": 5000
  },
  
  "compatibility": {
    "browsers": [
      "Chrome >= 90",
      "Firefox >= 88",
      "Safari >= 14",
      "Edge >= 90"
    ],
    "node": ">=18.0.0",
    "npm": ">=8.0.0",
    "postgresql": ">=13.0"
  },
  
  "license": "MIT",
  
  "contacts": {
    "maintainers": ["KaDong Team"],
    "email": "support@kadong-tools.com",
    "issues": "https://github.com/username/KaDongSite/issues",
    "discussions": "https://github.com/username/KaDongSite/discussions"
  },
  
  "metadata": {
    "created": "2024-11-01",
    "lastUpdated": "2025-11-12",
    "manifestVersion": "1.4.1",
    "generatedBy": "Senior AI Developer Assistant",
    "purpose": "Standardize development workflow and maintain consistency",
    "autoUpdate": {
      "enabled": true,
      "instructions": "When adding new features, AI must automatically update this manifest with: (1) new tools in 'tools.available', (2) new DB tables in 'database.tables', (3) new API endpoints in 'api.endpoints', (4) new dependencies in 'dependencies' section, (5) update 'metadata.lastUpdated' and increment 'metadata.manifestVersion'"
    },
    "changes": {
      "v1.4.1": {
        "date": "2025-11-12",
        "description": "Documentation Reorganization - Moved bug fix summaries and user guides to proper structure",
        "updates": [
          "Moved UUID_FIX_SUMMARY.md to docs/dev-notes/bugfixes/fix-invalid-uuid-global-migration.md",
          "Moved USER_SYSTEM.md to docs/USER_SYSTEM.md",
          "Cleaned up root directory - all documentation now properly organized",
          "Bug fix summary documents global UUID migration across 5 frontend files",
          "User system guide covers admin/guest setup, permissions, and seeding procedures"
        ]
      },
      "v1.4.0": {
        "date": "2025-11-11",
        "description": "Gold Price Real API Integration - Replaced mock provider with real market data",
        "updates": [
          "Created backend/providers/realProvider.js with 3 data sources (ExchangeRate API, Vietcombank XML, fallback)",
          "Updated provider system to prioritize real provider over mock",
          "Installed cheerio dependency for XML parsing",
          "Set realistic Nov 2025 base prices (SJC_9999: 78.8M VND)",
          "Frontend filters per-chỉ prices, shows only per-lượng (SJC_9999, SJC_24K, DOJI_24K, XAU_USD)",
          "Increased chart historical data points from 30 to 100",
          "Added GOLD_PRICE_FIX_SUMMARY.md documentation",
          "Successfully tested: Fetched 4 gold types in 1.5s, saved to database"
        ]
      },
      "v1.3.2": {
        "date": "2025-11-11",
        "description": "Network Access Configuration - Enable LAN access from mobile/laptop devices",
        "updates": [
          "Updated vite.config.js with host: '0.0.0.0' for LAN access",
          "Updated backend/app.js with HOST: '0.0.0.0' and dynamic IP detection",
          "Updated src/config/constants.js with dynamic API_BASE_URL based on hostname",
          "Created scripts/network-info.js to display all network URLs",
          "Created scripts/setup-firewall.ps1 for automated Windows Firewall configuration",
          "Created docs/NETWORK_ACCESS_GUIDE.md with comprehensive setup guide",
          "Created docs/TROUBLESHOOTING_NETWORK.md with 5 common issues and solutions",
          "Created NETWORK_QUICK_START.md for quick reference",
          "Frontend port changed from 5173 to 3000 for consistency",
          "Backend and frontend now accessible via network IP (192.168.2.14)"
        ]
      },
      "v1.3.3": {
        "date": "2025-11-12",
        "description": "Restructured specs/ folder for better organization",
        "updates": [
          "Created specs/specs/ subfolder to contain all .spec files",
          "Moved 01_init.spec and 02_weather_tool.spec into specs/specs/",
          "Updated specs/README.md with new directory structure",
          "Updated specs/config.json directories and examples paths",
          "Updated project_manifest.json specKit structure documentation",
          "Cleaner separation: specs/ (root) now only contains organizational files (README, COMMANDS, config)",
          "Better hierarchy: specs/specs/, specs/plans/, specs/plans/tasks/, specs/templates/"
        ]
      },
      "v1.3.1": {
        "date": "2025-11-11",
        "description": "Created Weather Tool specification",
        "updates": [
          "Created specs/specs/02_weather_tool.spec with comprehensive specification",
          "Weather tool with OpenWeatherMap API integration planned",
          "Weather-appropriate Framer Motion animations (sunny, rainy, cloudy, snowy, thunderstorm)",
          "Geolocation, city search, favorite cities features",
          "Database tables: favorite_cities, weather_cache",
          "API endpoints: /api/weather/current, /api/weather/forecast, /api/weather/hourly, /api/weather/favorites",
          "3-week implementation timeline planned"
        ]
      },
      "v1.3.0": {
        "date": "2025-11-11",
        "description": "Integrated Spec Kit specification management system",
        "updates": [
          "Created specs/ directory structure with plans/ and templates/ subdirectories",
          "Created comprehensive templates: TEMPLATE_spec.md, TEMPLATE_plan.md, TEMPLATE_task.md",
          "Created specs/README.md with complete workflow guide and command reference",
          "Created specs/config.json with configuration, validation rules, and AI instructions",
          "Created initial specs/01_init.spec documenting project initialization",
          "Created specs/plans/01_init.plan with 7-phase implementation plan (85% complete)",
          "Added specKit section in conventions.documentation with workflow and AI instructions",
          "Integrated Spec Kit with dev-notes system for seamless tracking"
        ]
      },
      "v1.2.0": {
        "date": "2025-11-11",
        "description": "Added dev-notes folder structure for development tracking",
        "updates": [
          "Created docs/dev-notes/ with features/, bugfixes/, commits/ subdirectories",
          "Moved GOLD_IMPLEMENTATION_STATUS.md to dev-notes/features/",
          "Moved COMMIT_SUMMARY.md to dev-notes/commits/",
          "Moved FIX_UUID_VALIDATION_ERROR.md to dev-notes/bugfixes/",
          "Added devNotes section in conventions.documentation with naming rules and AI instructions",
          "Created dev-notes/README.md with usage guide and best practices"
        ]
      }
    }
  },
  
  "dependencies": {
    "frontend": {
      "required": [
        "react@18.2.0",
        "react-dom@18.2.0",
        "react-router-dom@6.20.0",
        "framer-motion@10.16.16",
        "lucide-react@latest",
        "date-fns@latest",
        "prop-types@^15.8.1"
      ],
      "devDependencies": [
        "@vitejs/plugin-react@4.2.1",
        "vite@5.0.8",
        "tailwindcss@3.3.6",
        "postcss@latest",
        "autoprefixer@latest",
        "eslint@latest",
        "prettier@latest"
      ]
    },
    "backend": {
      "required": [
        "express@4.18.2",
        "pg@8.11.3",
        "dotenv@latest",
        "cors@latest",
        "body-parser@latest",
        "bcrypt@latest",
        "jsonwebtoken@latest"
      ],
      "devDependencies": [
        "nodemon@latest",
        "jest@latest",
        "supertest@latest",
        "eslint@latest",
        "prettier@latest"
      ]
    }
  },
  
  "aiWorkflow": {
    "manifestUpdateRules": {
      "whenAddingNewFeature": [
        "1. Add tool metadata to 'tools.available' array with complete properties",
        "2. Add database table name to 'database.tables' array if DB is used",
        "3. Add API endpoint to 'api.endpoints' object if backend API created",
        "4. Add new dependencies to 'dependencies.frontend.required' or 'dependencies.backend.required'",
        "5. Update 'metadata.lastUpdated' to current date (YYYY-MM-DD)",
        "6. Increment 'metadata.manifestVersion' (e.g., 1.1.0 -> 1.2.0 for new feature)"
      ],
      "whenFixingBug": [
        "1. Update 'metadata.lastUpdated' to current date",
        "2. Increment patch version (e.g., 1.1.0 -> 1.1.1)"
      ],
      "whenUpdatingDependencies": [
        "1. Update version numbers in 'dependencies' section",
        "2. Update 'metadata.lastUpdated' to current date",
        "3. Note changes in 'metadata.changes' if significant"
      ],
      "mandatory": true,
      "failIfNotUpdated": true
    },
    "changelogUpdateRules": {
      "location": "docs/wiki/10_Changelog.md",
      "format": "Keep a Changelog",
      "versioning": "Semantic Versioning",
      "whenAddingNewFeature": [
        "Add new version section [X.Y.0] with date",
        "List feature under '### ✨ New Features'",
        "Include components, API endpoints, database changes",
        "Add tests written",
        "Note any breaking changes"
      ],
      "mandatory": true
    },
    "documentationUpdateRules": {
      "whenAddingNewFeature": [
        "Update 'docs/wiki/05_API_Documentation.md' with new API section",
        "Update 'README.md' with feature in tools list",
        "Update 'docs/wiki/04_DatabaseSchema.md' if new table added",
        "Update 'docs/wiki/06_FrontendOverview.md' if new components added"
      ],
      "mandatory": true
    },
    "testingRules": {
      "minimumCoverage": 80,
      "requiredTests": [
        "Unit tests for all CRUD operations",
        "Integration tests for API endpoints",
        "Validation error tests",
        "Security tests (SQL injection, XSS)",
        "Edge case tests"
      ],
      "testFileLocation": "backend/tests/[feature-name].test.js",
      "mandatory": true
    },
    "securityChecklist": [
      "✓ Parameterized SQL queries (never string concatenation)",
      "✓ Input validation (whitelist approach)",
      "✓ XSS prevention (React auto-escaping, no dangerouslySetInnerHTML)",
      "✓ No hardcoded secrets (use .env)",
      "✓ Soft delete implemented if applicable",
      "✓ Error messages don't leak sensitive info",
      "✓ CORS properly configured",
      "✓ Rate limiting considered"
    ],
    "gitCommitRules": {
      "convention": "Conventional Commits",
      "format": "type(scope): subject",
      "types": {
        "feat": "New feature",
        "fix": "Bug fix",
        "docs": "Documentation only",
        "style": "Code style (formatting, semicolons)",
        "refactor": "Code refactoring",
        "test": "Adding tests",
        "chore": "Maintenance tasks"
      },
      "examples": [
        "feat(fashion): add color matcher tool with realtime preview",
        "fix(notes): resolve color picker not updating state",
        "docs(api): update fashion endpoints documentation"
      ]
    },
    "prTemplateRules": {
      "location": ".github/pull_request_template.md",
      "requiredSections": [
        "Summary",
        "Type of Change",
        "What's Changed (Backend/Frontend/Tests/Docs)",
        "Testing Checklist",
        "Security Checklist",
        "Files Changed count"
      ],
      "autoGenerate": true
    }
  }
}
