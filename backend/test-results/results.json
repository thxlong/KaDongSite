{
  "config": {
    "configFile": "C:\\Projects\\Personal\\KaDongSite\\backend\\playwright.config.js",
    "rootDir": "C:/Projects/Personal/KaDongSite/backend/tests",
    "forbidOnly": false,
    "fullyParallel": true,
    "globalSetup": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\global-setup.js",
    "globalTeardown": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\global-teardown.js",
    "globalTimeout": 0,
    "grep": {},
    "grepInvert": null,
    "maxFailures": 0,
    "metadata": {
      "actualWorkers": 6
    },
    "preserveOutput": "always",
    "reporter": [
      [
        "html",
        {
          "outputFolder": "playwright-report",
          "open": "never"
        }
      ],
      [
        "json",
        {
          "outputFile": "test-results/results.json"
        }
      ],
      [
        "list",
        null
      ]
    ],
    "reportSlowTests": {
      "max": 5,
      "threshold": 300000
    },
    "quiet": false,
    "projects": [
      {
        "outputDir": "C:/Projects/Personal/KaDongSite/backend/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 6
        },
        "id": "API Tests",
        "name": "API Tests",
        "testDir": "C:/Projects/Personal/KaDongSite/backend/tests",
        "testIgnore": [
          "**/frontend/**",
          "**/tests/fashion.test.js",
          "**/tests/mocks/**"
        ],
        "testMatch": [
          "/.*\\.api\\.spec\\.js/"
        ],
        "timeout": 30000
      },
      {
        "outputDir": "C:/Projects/Personal/KaDongSite/backend/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 6
        },
        "id": "Integration Tests",
        "name": "Integration Tests",
        "testDir": "C:/Projects/Personal/KaDongSite/backend/tests",
        "testIgnore": [
          "**/frontend/**",
          "**/tests/fashion.test.js",
          "**/tests/mocks/**"
        ],
        "testMatch": [
          "/.*\\.integration\\.spec\\.js/"
        ],
        "timeout": 30000
      }
    ],
    "shard": null,
    "updateSnapshots": "missing",
    "updateSourceMethod": "patch",
    "version": "1.56.1",
    "workers": 6,
    "webServer": null
  },
  "suites": [
    {
      "title": "integration\\api\\auth.api.spec.js",
      "file": "integration/api/auth.api.spec.js",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "Authentication API",
          "file": "integration/api/auth.api.spec.js",
          "line": 23,
          "column": 6,
          "specs": [],
          "suites": [
            {
              "title": "POST /api/auth/register",
              "file": "integration/api/auth.api.spec.js",
              "line": 30,
              "column": 8,
              "specs": [
                {
                  "title": "should register a new user successfully",
                  "ok": true,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 0,
                          "parallelIndex": 0,
                          "status": "passed",
                          "duration": 733,
                          "errors": [],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:33.452Z",
                          "annotations": [],
                          "attachments": []
                        }
                      ],
                      "status": "expected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-eef69d66a14a3e99605a",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 32,
                  "column": 5
                },
                {
                  "title": "should reject registration with duplicate email",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 1,
                          "parallelIndex": 1,
                          "status": "failed",
                          "duration": 435,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:78:33",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 33,
                              "line": 78
                            },
                            "snippet": "\u001b[0m \u001b[90m 76 |\u001b[39m       })\n \u001b[90m 77 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 79 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 80 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 81 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'email'\u001b[39m)\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 33,
                                "line": 78
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n\n\u001b[0m \u001b[90m 76 |\u001b[39m       })\n \u001b[90m 77 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m    |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 79 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 80 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 81 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'email'\u001b[39m)\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:78:33\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:33.421Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 33,
                            "line": 78
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-2a3bc5136d8b93f66985",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 59,
                  "column": 5
                },
                {
                  "title": "should reject registration with invalid email",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 2,
                          "parallelIndex": 2,
                          "status": "failed",
                          "duration": 214,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must not be null nor undefined\n\nReceived has value: \u001b[31mundefined\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must not be null nor undefined\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:96:28",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 28,
                              "line": 96
                            },
                            "snippet": "\u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 95 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'email'\u001b[39m)\n \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 97 |\u001b[39m     })\n \u001b[90m 98 |\u001b[39m\n \u001b[90m 99 |\u001b[39m     test(\u001b[32m'should reject registration with weak password'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m ({ request }) \u001b[33m=>\u001b[39m {\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 28,
                                "line": 96
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must not be null nor undefined\n\nReceived has value: \u001b[31mundefined\u001b[39m\n\n\u001b[0m \u001b[90m 94 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 95 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'email'\u001b[39m)\n \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 97 |\u001b[39m     })\n \u001b[90m 98 |\u001b[39m\n \u001b[90m 99 |\u001b[39m     test(\u001b[32m'should reject registration with weak password'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m ({ request }) \u001b[33m=>\u001b[39m {\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:96:28\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:33.428Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 28,
                            "line": 96
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-7663e322bf687a6682bd",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 84,
                  "column": 5
                },
                {
                  "title": "should reject registration with weak password",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 3,
                          "parallelIndex": 3,
                          "status": "failed",
                          "duration": 168,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:108:33",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 33,
                              "line": 108
                            },
                            "snippet": "\u001b[0m \u001b[90m 106 |\u001b[39m       })\n \u001b[90m 107 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 108 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 109 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 110 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 111 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoMatch(\u001b[35m/password|mật khẩu/\u001b[39m)\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 33,
                                "line": 108
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n\n\u001b[0m \u001b[90m 106 |\u001b[39m       })\n \u001b[90m 107 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 108 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 109 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 110 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 111 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoMatch(\u001b[35m/password|mật khẩu/\u001b[39m)\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:108:33\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:33.558Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 33,
                            "line": 108
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-dd0c3d630115804a8962",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 99,
                  "column": 5
                },
                {
                  "title": "should reject registration with missing required fields",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 4,
                          "parallelIndex": 4,
                          "status": "failed",
                          "duration": 146,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:122:33",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 33,
                              "line": 122
                            },
                            "snippet": "\u001b[0m \u001b[90m 120 |\u001b[39m       })\n \u001b[90m 121 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 122 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 123 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 124 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 125 |\u001b[39m     })\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 33,
                                "line": 122
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n\n\u001b[0m \u001b[90m 120 |\u001b[39m       })\n \u001b[90m 121 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 122 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 123 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 124 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 125 |\u001b[39m     })\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:122:33\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:33.505Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 33,
                            "line": 122
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-46ca2143c97a97bb13e9",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 114,
                  "column": 5
                }
              ]
            },
            {
              "title": "POST /api/auth/login",
              "file": "integration/api/auth.api.spec.js",
              "line": 128,
              "column": 8,
              "specs": [
                {
                  "title": "should login successfully with correct credentials",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 5,
                          "parallelIndex": 5,
                          "status": "failed",
                          "duration": 512,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m401\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m401\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:150:33",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 33,
                              "line": 150
                            },
                            "snippet": "\u001b[0m \u001b[90m 148 |\u001b[39m       })\n \u001b[90m 149 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 150 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 151 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 152 |\u001b[39m       \n \u001b[90m 153 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 33,
                                "line": 150
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m401\u001b[39m\n\n\u001b[0m \u001b[90m 148 |\u001b[39m       })\n \u001b[90m 149 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 150 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 151 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 152 |\u001b[39m       \n \u001b[90m 153 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:150:33\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:33.623Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 33,
                            "line": 150
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-d21e4d218282926ea88d",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 141,
                  "column": 5
                },
                {
                  "title": "should login with rememberMe and get longer session",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 6,
                          "parallelIndex": 2,
                          "status": "failed",
                          "duration": 197,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m401\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m401\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:180:33",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 33,
                              "line": 180
                            },
                            "snippet": "\u001b[0m \u001b[90m 178 |\u001b[39m       })\n \u001b[90m 179 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 180 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 181 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 182 |\u001b[39m       expect(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mexpiresIn)\u001b[33m.\u001b[39mtoContain(\u001b[32m'30d'\u001b[39m)\n \u001b[90m 183 |\u001b[39m     })\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 33,
                                "line": 180
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m401\u001b[39m\n\n\u001b[0m \u001b[90m 178 |\u001b[39m       })\n \u001b[90m 179 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 180 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 181 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 182 |\u001b[39m       expect(data\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mexpiresIn)\u001b[33m.\u001b[39mtoContain(\u001b[32m'30d'\u001b[39m)\n \u001b[90m 183 |\u001b[39m     })\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:180:33\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:38.047Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 33,
                            "line": 180
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-68cd2fd593743ba162f3",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 171,
                  "column": 5
                },
                {
                  "title": "should reject login with wrong password",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 7,
                          "parallelIndex": 4,
                          "status": "failed",
                          "duration": 198,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:197:27",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 27,
                              "line": 197
                            },
                            "snippet": "\u001b[0m \u001b[90m 195 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 196 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoMatch(\u001b[35m/invalid|sai|không đúng/\u001b[39m)\n \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 198 |\u001b[39m     })\n \u001b[90m 199 |\u001b[39m\n \u001b[90m 200 |\u001b[39m     test(\u001b[32m'should reject login with non-existent user'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m ({ request }) \u001b[33m=>\u001b[39m {\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 27,
                                "line": 197
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n\n\u001b[0m \u001b[90m 195 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 196 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 197 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoMatch(\u001b[35m/invalid|sai|không đúng/\u001b[39m)\n \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 198 |\u001b[39m     })\n \u001b[90m 199 |\u001b[39m\n \u001b[90m 200 |\u001b[39m     test(\u001b[32m'should reject login with non-existent user'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m ({ request }) \u001b[33m=>\u001b[39m {\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:197:27\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:38.232Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 27,
                            "line": 197
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-56a3e06f2fe278a67003",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 185,
                  "column": 5
                },
                {
                  "title": "should reject login with non-existent user",
                  "ok": true,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 8,
                          "parallelIndex": 3,
                          "status": "passed",
                          "duration": 188,
                          "errors": [],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:38.155Z",
                          "annotations": [],
                          "attachments": []
                        }
                      ],
                      "status": "expected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-cb4b115e122a8d19b620",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 200,
                  "column": 5
                },
                {
                  "title": "should reject login with missing credentials",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 9,
                          "parallelIndex": 1,
                          "status": "failed",
                          "duration": 190,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:222:33",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 33,
                              "line": 222
                            },
                            "snippet": "\u001b[0m \u001b[90m 220 |\u001b[39m       })\n \u001b[90m 221 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 222 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 223 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 224 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 225 |\u001b[39m     })\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 33,
                                "line": 222
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n\n\u001b[0m \u001b[90m 220 |\u001b[39m       })\n \u001b[90m 221 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 222 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 223 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 224 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 225 |\u001b[39m     })\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:222:33\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:38.358Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 33,
                            "line": 222
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-e95c53309ffe2122c7f2",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 214,
                  "column": 5
                }
              ]
            },
            {
              "title": "GET /api/auth/me",
              "file": "integration/api/auth.api.spec.js",
              "line": 228,
              "column": 8,
              "specs": [
                {
                  "title": "should get current user with valid token",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 10,
                          "parallelIndex": 5,
                          "status": "failed",
                          "duration": 209,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:249:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 249
                            },
                            "snippet": "\u001b[0m \u001b[90m 247 |\u001b[39m\n \u001b[90m 248 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 250 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 251 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 252 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 249
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 247 |\u001b[39m\n \u001b[90m 248 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 250 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 251 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 252 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:249:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:38.660Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 249
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-4602ebdaa4cda4e65dc5",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 255,
                  "column": 5
                },
                {
                  "title": "should reject request without token",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 0,
                          "parallelIndex": 0,
                          "status": "failed",
                          "duration": 52,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:249:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 249
                            },
                            "snippet": "\u001b[0m \u001b[90m 247 |\u001b[39m\n \u001b[90m 248 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 250 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 251 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 252 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 249
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 247 |\u001b[39m\n \u001b[90m 248 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 250 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 251 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 252 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:249:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:34.280Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 249
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-7d4bd25062c025cc8d18",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 273,
                  "column": 5
                },
                {
                  "title": "should reject request with invalid token",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 11,
                          "parallelIndex": 0,
                          "status": "failed",
                          "duration": 181,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:249:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 249
                            },
                            "snippet": "\u001b[0m \u001b[90m 247 |\u001b[39m\n \u001b[90m 248 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 250 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 251 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 252 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 249
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 247 |\u001b[39m\n \u001b[90m 248 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 249 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 250 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 251 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 252 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:249:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:38.797Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 249
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-432011f8748be9f4ba27",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 282,
                  "column": 5
                }
              ]
            },
            {
              "title": "POST /api/auth/logout",
              "file": "integration/api/auth.api.spec.js",
              "line": 295,
              "column": 8,
              "specs": [
                {
                  "title": "should logout successfully with cookie token",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 12,
                          "parallelIndex": 2,
                          "status": "failed",
                          "duration": 264,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 316
                            },
                            "snippet": "\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 316
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:42.357Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 316
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-0b7b3db966d98728fad2",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 322,
                  "column": 5
                },
                {
                  "title": "should logout successfully with Authorization header",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 8,
                          "parallelIndex": 3,
                          "status": "failed",
                          "duration": 53,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 316
                            },
                            "snippet": "\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 316
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:38.461Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 316
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-8fa2441926f4a3183326",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 350,
                  "column": 5
                },
                {
                  "title": "should handle logout without token gracefully",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 13,
                          "parallelIndex": 4,
                          "status": "failed",
                          "duration": 220,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 316
                            },
                            "snippet": "\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 316
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:42.714Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 316
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-a2dfe7b4fe81480e1f61",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 371,
                  "column": 5
                },
                {
                  "title": "should handle logout with invalid token gracefully",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 14,
                          "parallelIndex": 3,
                          "status": "failed",
                          "duration": 205,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 316
                            },
                            "snippet": "\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 316
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:42.708Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 316
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-bdece2aae799da8fe94c",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 380,
                  "column": 5
                },
                {
                  "title": "should handle logout twice (idempotent)",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 15,
                          "parallelIndex": 1,
                          "status": "failed",
                          "duration": 211,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 316
                            },
                            "snippet": "\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 316
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:42.761Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 316
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-546d9498fd217384a81a",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 392,
                  "column": 5
                },
                {
                  "title": "should clear cookie even on database error",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 16,
                          "parallelIndex": 5,
                          "status": "failed",
                          "duration": 187,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 316
                            },
                            "snippet": "\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 316
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:42.915Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 316
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-5d554bd069aad07e74e0",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 414,
                  "column": 5
                },
                {
                  "title": "should revoke session but preserve session history",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 17,
                          "parallelIndex": 0,
                          "status": "failed",
                          "duration": 220,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 316
                            },
                            "snippet": "\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 316
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 314 |\u001b[39m\n \u001b[90m 315 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 316 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 317 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 318 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 319 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:316:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:43.218Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 316
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-63fe180d6df8851d9f31",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 431,
                  "column": 5
                }
              ]
            },
            {
              "title": "POST /api/auth/refresh",
              "file": "integration/api/auth.api.spec.js",
              "line": 452,
              "column": 8,
              "specs": [
                {
                  "title": "should refresh token successfully",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 18,
                          "parallelIndex": 2,
                          "status": "failed",
                          "duration": 182,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:473:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 473
                            },
                            "snippet": "\u001b[0m \u001b[90m 471 |\u001b[39m\n \u001b[90m 472 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 473 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 474 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 475 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 476 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 473
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 471 |\u001b[39m\n \u001b[90m 472 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 473 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 474 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 475 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 476 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:473:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:47.961Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 473
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-0aae2ef81c007b3e8036",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 479,
                  "column": 5
                },
                {
                  "title": "should reject refresh without token",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 19,
                          "parallelIndex": 4,
                          "status": "failed",
                          "duration": 185,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:473:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 473
                            },
                            "snippet": "\u001b[0m \u001b[90m 471 |\u001b[39m\n \u001b[90m 472 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 473 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 474 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 475 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 476 |\u001b[39m       }\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 473
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 471 |\u001b[39m\n \u001b[90m 472 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 473 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 474 |\u001b[39m       \u001b[36mif\u001b[39m (tokenMatch) {\n \u001b[90m 475 |\u001b[39m         authToken \u001b[33m=\u001b[39m tokenMatch[\u001b[35m1\u001b[39m]\n \u001b[90m 476 |\u001b[39m       }\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:473:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:48.052Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 473
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-31c76f239e093d8edf78",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 497,
                  "column": 5
                }
              ]
            },
            {
              "title": "POST /api/auth/forgot-password",
              "file": "integration/api/auth.api.spec.js",
              "line": 506,
              "column": 8,
              "specs": [
                {
                  "title": "should send reset email successfully",
                  "ok": true,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 20,
                          "parallelIndex": 3,
                          "status": "passed",
                          "duration": 180,
                          "errors": [],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:48.141Z",
                          "annotations": [],
                          "attachments": []
                        }
                      ],
                      "status": "expected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-fd28f194c6cff5e15457",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 519,
                  "column": 5
                },
                {
                  "title": "should return success even for non-existent email (security)",
                  "ok": true,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 21,
                          "parallelIndex": 1,
                          "status": "passed",
                          "duration": 186,
                          "errors": [],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:48.129Z",
                          "annotations": [],
                          "attachments": []
                        }
                      ],
                      "status": "expected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-816778ab04e347fb9b14",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 534,
                  "column": 5
                },
                {
                  "title": "should reject request with invalid email format",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 22,
                          "parallelIndex": 5,
                          "status": "failed",
                          "duration": 164,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m200\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m200\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:554:33",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 33,
                              "line": 554
                            },
                            "snippet": "\u001b[0m \u001b[90m 552 |\u001b[39m       })\n \u001b[90m 553 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 554 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 555 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 556 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 557 |\u001b[39m     })\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 33,
                                "line": 554
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m200\u001b[39m\n\n\u001b[0m \u001b[90m 552 |\u001b[39m       })\n \u001b[90m 553 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 554 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 555 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 556 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 557 |\u001b[39m     })\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:554:33\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:48.320Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 33,
                            "line": 554
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-4b1a50980e1aca5f82e7",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 547,
                  "column": 5
                },
                {
                  "title": "should reject request without email",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 23,
                          "parallelIndex": 0,
                          "status": "failed",
                          "duration": 168,
                          "error": {
                            "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m",
                            "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:564:33",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 33,
                              "line": 564
                            },
                            "snippet": "\u001b[0m \u001b[90m 562 |\u001b[39m       })\n \u001b[90m 563 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 564 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 565 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 566 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 567 |\u001b[39m     })\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 33,
                                "line": 564
                              },
                              "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m429\u001b[39m\n\n\u001b[0m \u001b[90m 562 |\u001b[39m       })\n \u001b[90m 563 |\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 564 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus())\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\n \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 565 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 566 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n \u001b[90m 567 |\u001b[39m     })\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:564:33\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:48.416Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 33,
                            "line": 564
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-3f4485c361f5047fc0c1",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 559,
                  "column": 5
                }
              ]
            },
            {
              "title": "POST /api/auth/reset-password",
              "file": "integration/api/auth.api.spec.js",
              "line": 570,
              "column": 8,
              "specs": [
                {
                  "title": "should reject reset with invalid token",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 24,
                          "parallelIndex": 2,
                          "status": "failed",
                          "duration": 146,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:597:27",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 27,
                              "line": 597
                            },
                            "snippet": "\u001b[0m \u001b[90m 595 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 596 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 597 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoMatch(\u001b[35m/token|invalid|hết hạn/\u001b[39m)\n \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 598 |\u001b[39m     })\n \u001b[90m 599 |\u001b[39m\n \u001b[90m 600 |\u001b[39m     test(\u001b[32m'should reject reset with weak password'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m ({ request }) \u001b[33m=>\u001b[39m {\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 27,
                                "line": 597
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n\n\u001b[0m \u001b[90m 595 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 596 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 597 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoMatch(\u001b[35m/token|invalid|hết hạn/\u001b[39m)\n \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 598 |\u001b[39m     })\n \u001b[90m 599 |\u001b[39m\n \u001b[90m 600 |\u001b[39m     test(\u001b[32m'should reject reset with weak password'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m ({ request }) \u001b[33m=>\u001b[39m {\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:597:27\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:52.119Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 27,
                            "line": 597
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-20f8732a9e1b6c0b4e92",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 586,
                  "column": 5
                },
                {
                  "title": "should reject reset with weak password",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 25,
                          "parallelIndex": 4,
                          "status": "failed",
                          "duration": 137,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:611:27",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 27,
                              "line": 611
                            },
                            "snippet": "\u001b[0m \u001b[90m 609 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 610 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 611 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoMatch(\u001b[35m/password|mật khẩu/\u001b[39m)\n \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 612 |\u001b[39m     })\n \u001b[90m 613 |\u001b[39m\n \u001b[90m 614 |\u001b[39m     test(\u001b[32m'should reject reset without required fields'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m ({ request }) \u001b[33m=>\u001b[39m {\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 27,
                                "line": 611
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n\n\u001b[0m \u001b[90m 609 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 610 |\u001b[39m       expect(data)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 611 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoMatch(\u001b[35m/password|mật khẩu/\u001b[39m)\n \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 612 |\u001b[39m     })\n \u001b[90m 613 |\u001b[39m\n \u001b[90m 614 |\u001b[39m     test(\u001b[32m'should reject reset without required fields'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m ({ request }) \u001b[33m=>\u001b[39m {\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:611:27\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:52.195Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 27,
                            "line": 611
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-0b3dd21790b4e7024726",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 600,
                  "column": 5
                },
                {
                  "title": "should reject reset without required fields",
                  "ok": true,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 21,
                          "parallelIndex": 1,
                          "status": "passed",
                          "duration": 53,
                          "errors": [],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:48.439Z",
                          "annotations": [],
                          "attachments": []
                        }
                      ],
                      "status": "expected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-202f8fd730e6e6e08f24",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 614,
                  "column": 5
                }
              ]
            },
            {
              "title": "Security & Rate Limiting",
              "file": "integration/api/auth.api.spec.js",
              "line": 628,
              "column": 8,
              "specs": [
                {
                  "title": "should not reveal if user exists in error messages",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 20,
                          "parallelIndex": 3,
                          "status": "failed",
                          "duration": 41,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:640:27",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 27,
                              "line": 640
                            },
                            "snippet": "\u001b[0m \u001b[90m 638 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 639 |\u001b[39m       \u001b[90m// Error message should be generic, not \"User not found\"\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 640 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[32m'user not found'\u001b[39m)\n \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 641 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[32m'không tồn tại'\u001b[39m)\n \u001b[90m 642 |\u001b[39m     })\n \u001b[90m 643 |\u001b[39m\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 27,
                                "line": 640
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n\n\u001b[0m \u001b[90m 638 |\u001b[39m       \u001b[36mconst\u001b[39m data \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mjson()\n \u001b[90m 639 |\u001b[39m       \u001b[90m// Error message should be generic, not \"User not found\"\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 640 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[32m'user not found'\u001b[39m)\n \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 641 |\u001b[39m       expect(data\u001b[33m.\u001b[39mmessage\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[32m'không tồn tại'\u001b[39m)\n \u001b[90m 642 |\u001b[39m     })\n \u001b[90m 643 |\u001b[39m\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:640:27\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:48.458Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 27,
                            "line": 640
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-619f040c59c4b11ef6ec",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 630,
                  "column": 5
                },
                {
                  "title": "should not return password hash in any response",
                  "ok": true,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 26,
                          "parallelIndex": 3,
                          "status": "passed",
                          "duration": 128,
                          "errors": [],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:52.350Z",
                          "annotations": [],
                          "attachments": []
                        }
                      ],
                      "status": "expected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-38e3b37d20d44ed51204",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 644,
                  "column": 5
                },
                {
                  "title": "should set httpOnly cookie for security",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 21,
                          "parallelIndex": 1,
                          "status": "failed",
                          "duration": 30,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:682:22",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 22,
                              "line": 682
                            },
                            "snippet": "\u001b[0m \u001b[90m 680 |\u001b[39m\n \u001b[90m 681 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 682 |\u001b[39m       expect(cookies\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoContain(\u001b[32m'httponly'\u001b[39m)\n \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 683 |\u001b[39m     })\n \u001b[90m 684 |\u001b[39m   })\n \u001b[90m 685 |\u001b[39m\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 22,
                                "line": 682
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n\n\u001b[0m \u001b[90m 680 |\u001b[39m\n \u001b[90m 681 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 682 |\u001b[39m       expect(cookies\u001b[33m.\u001b[39mtoLowerCase())\u001b[33m.\u001b[39mtoContain(\u001b[32m'httponly'\u001b[39m)\n \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 683 |\u001b[39m     })\n \u001b[90m 684 |\u001b[39m   })\n \u001b[90m 685 |\u001b[39m\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:682:22\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:48.605Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 22,
                            "line": 682
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-5d41fa9071208104bd69",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 672,
                  "column": 5
                }
              ]
            },
            {
              "title": "Performance",
              "file": "integration/api/auth.api.spec.js",
              "line": 686,
              "column": 8,
              "specs": [
                {
                  "title": "login should respond within 500ms",
                  "ok": true,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 27,
                          "parallelIndex": 5,
                          "status": "passed",
                          "duration": 127,
                          "errors": [],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:52.351Z",
                          "annotations": [],
                          "attachments": []
                        }
                      ],
                      "status": "expected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-96327ed01e593f758f21",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 688,
                  "column": 5
                },
                {
                  "title": "token verification should be fast (<100ms)",
                  "ok": false,
                  "tags": [],
                  "tests": [
                    {
                      "timeout": 30000,
                      "annotations": [],
                      "expectedStatus": "passed",
                      "projectId": "API Tests",
                      "projectName": "API Tests",
                      "results": [
                        {
                          "workerIndex": 28,
                          "parallelIndex": 1,
                          "status": "failed",
                          "duration": 86,
                          "error": {
                            "message": "TypeError: Cannot read properties of undefined (reading 'match')",
                            "stack": "TypeError: Cannot read properties of undefined (reading 'match')\n    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:731:34",
                            "location": {
                              "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                              "column": 34,
                              "line": 731
                            },
                            "snippet": "\u001b[0m \u001b[90m 729 |\u001b[39m\n \u001b[90m 730 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 731 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 732 |\u001b[39m       \u001b[36mconst\u001b[39m token \u001b[33m=\u001b[39m tokenMatch \u001b[33m?\u001b[39m tokenMatch[\u001b[35m1\u001b[39m] \u001b[33m:\u001b[39m \u001b[32m''\u001b[39m\n \u001b[90m 733 |\u001b[39m\n \u001b[90m 734 |\u001b[39m       \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[0m"
                          },
                          "errors": [
                            {
                              "location": {
                                "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                                "column": 34,
                                "line": 731
                              },
                              "message": "TypeError: Cannot read properties of undefined (reading 'match')\n\n\u001b[0m \u001b[90m 729 |\u001b[39m\n \u001b[90m 730 |\u001b[39m       \u001b[36mconst\u001b[39m cookies \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mheaders()[\u001b[32m'set-cookie'\u001b[39m]\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 731 |\u001b[39m       \u001b[36mconst\u001b[39m tokenMatch \u001b[33m=\u001b[39m cookies\u001b[33m.\u001b[39mmatch(\u001b[35m/token=([^;]+)/\u001b[39m)\n \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 732 |\u001b[39m       \u001b[36mconst\u001b[39m token \u001b[33m=\u001b[39m tokenMatch \u001b[33m?\u001b[39m tokenMatch[\u001b[35m1\u001b[39m] \u001b[33m:\u001b[39m \u001b[32m''\u001b[39m\n \u001b[90m 733 |\u001b[39m\n \u001b[90m 734 |\u001b[39m       \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[0m\n\u001b[2m    at C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js:731:34\u001b[22m"
                            }
                          ],
                          "stdout": [],
                          "stderr": [],
                          "retry": 0,
                          "startTime": "2025-11-13T17:51:52.521Z",
                          "annotations": [],
                          "attachments": [],
                          "errorLocation": {
                            "file": "C:\\Projects\\Personal\\KaDongSite\\backend\\tests\\integration\\api\\auth.api.spec.js",
                            "column": 34,
                            "line": 731
                          }
                        }
                      ],
                      "status": "unexpected"
                    }
                  ],
                  "id": "e1259fcfddf035549a56-d788b327083228d5f747",
                  "file": "integration/api/auth.api.spec.js",
                  "line": 712,
                  "column": 5
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "errors": [],
  "stats": {
    "startTime": "2025-11-13T17:51:28.065Z",
    "duration": 24630.635,
    "expected": 7,
    "skipped": 0,
    "unexpected": 27,
    "flaky": 0
  }
}